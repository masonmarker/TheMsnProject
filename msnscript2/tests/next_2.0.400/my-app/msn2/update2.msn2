# Updates this NextJS project with MSN2 translated code.
#
# test 2
#
# author : Mason Marker
# date : 12/16/2023

# msn2 general imports go here
# import React MSN2 library
import ('lib/web/react')

# create page at the given path
react:page('tests/next_2.0.400/my-app/pages/index.jsx', script((

    # define an api script, does not translate to any in-page code
    defineapi('getstuff', 'req', 'res', (
        # send a response
        res.status(200).json({'name': 'John Doe'})
    )),

    # import a react component
    import ('components/Navbar'),

    # create some variables
    const value = 3,
    const value3 = 50,
    const('Navigation', <Navbar />),
    state('value2', 4),
    state('value4', 'thing'),

    # return component
    center(
        vstack(
            hstack(
                Navigation
            ),
            hstack(
                button(
                    onClick=do(async(
                        value2.set(value2 + 1),
                        prnt(apiget('getstuff'), value2)
                    )),
                    'press me'
                )
            ),
            h1(value2),
            grid(2, 2, 
                button('1'),
                button('2'),
                button('3'),
                button('4')
            )
        )
   )
)))
