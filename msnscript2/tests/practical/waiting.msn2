# Uses an online salary calculator to compute salary after taxes.
#
# author : Mason Marker
# date : 5/23/2023

# defines and opens Chrome
@ chrome = app('C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe')
chrome.start()

# search Google for salary of a neurologist in California
chrome.write('what is the salary of a neurologist in California?')

# press the enter key
chrome.enter()

# get the first Google link
wait(@ first_google_link = first(
    chrome.find_links('Neurologist Salary in California'))
)

# click the link
first_google_link.click()

# wait for the page to load by a unique
# footer on the page
chrome.wait_for_text (
    'California is a state in the Pacific Region of the United States.'
)

# get the first child containing a '$', and it's text,
# then extract it from its enclosing paragraph
@ salary_text = first(chrome.find_children('$'))
@ salary_text = salary_text.text()
@ salary = salary_text.around('$', 0, 7)

# get an integer from the string version of the salary
salary.replace('$', '')
salary.replace(',', '')
@ salary = salary.int()

# get the new tab button for Chrome, and click it
@ new_tab = first(chrome .find_buttons('New Tab'))
new_tab.click()
# wait to see the default Google search page
chrome.wait_for_text('customize chrome')

# search for salary calculator
chrome.write('salary calculator')
chrome.enter()

# wait for the correct link to appear, then click it
wait(@ smart_asset_link = first(
    chrome.find_links('paycheck calculator: federal'))
)
smart_asset_link.click()

# wait for the page to load by a unique
# footer on the page
chrome.wait_for_text('Sources: SmartAsset, government websites')

# get the description of the input for the salary to be entered
@ salary_input_description = first(
    chrome.find_all_children_exact('Salary (per year)')
)
# hovers the mouse over the description
salary_input_description.hover()
# moves the mouse down 10 pixels
mouse.down(20)

0|10|_ (=>(mouse.click(), sleep(1), print('clicked at', mouse.position())))



# enter the salary into the input box
salary_input_box.write(salary.val())

